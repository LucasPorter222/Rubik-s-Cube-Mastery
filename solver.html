<nav style="background: var(--bg-card); padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center;">
    <a href="index.html" style="margin: 0 15px; text-decoration: none; color: var(--accent); font-weight: bold;">üè† Home</a>
    <a href="solver.html" style="margin: 0 15px; text-decoration: none; color: var(--accent); font-weight: bold;">ü§ñ Solver</a>
    <a href="blog.html" style="margin: 0 15px; text-decoration: none; color: var(--accent); font-weight: bold;">üìù Blog</a>
    <a href="algorithms/index.html" style="margin: 0 15px; text-decoration: none; color: var(--accent); font-weight: bold;">üéØ Algorithms</a>
</nav>

<!-- Add to nav-tabs section -->
<button class="tab-btn" onclick="showTab('solver')">Cube Solver</button>

<!-- Add this content section -->
<div id="solver" class="content-section">
    <h2>ü§ñ Interactive Rubik's Cube Solver</h2>
    <p>Enter your cube's current state and get step-by-step solution instructions.</p>

    <div class="method-card">
        <h3>üéØ How to Use the Solver</h3>
        <ol class="step-list">
            <li>Select your cube's color scheme</li>
            <li>Input your current cube state using the color picker</li>
            <li>Click "Solve" to generate the solution</li>
            <li>Follow the step-by-step instructions</li>
        </ol>
    </div>

    <div class="solver-interface">
        <div class="cube-input-section">
            <h3>üé® Input Your Cube State</h3>
            
            <div class="color-scheme-selector">
                <h4>Color Scheme</h4>
                <div class="notation-grid">
                    <div class="notation-item" onclick="setColorScheme('standard')">
                        <strong>Standard</strong>
                        <p>BOY (White opposite Yellow)</p>
                    </div>
                    <div class="notation-item" onclick="setColorScheme('japanese')">
                        <strong>Japanese</strong>
                        <p>BYO (Blue opposite White)</p>
                    </div>
                </div>
            </div>

            <div class="cube-net">
                <div class="cube-face" id="face-U">
                    <h4>Up Face (Yellow)</h4>
                    <div class="face-grid">
                        <div class="sticker" data-piece="U1" onclick="cycleColor(this)"></div>
                        <div class="sticker" data-piece="U2" onclick="cycleColor(this)"></div>
                        <div class="sticker" data-piece="U3" onclick="cycleColor(this)"></div>
                        <div class="sticker" data-piece="U4" onclick="cycleColor(this)"></div>
                        <div class="sticker" data-piece="U5" onclick="cycleColor(this)"></div>
                        <div class="sticker" data-piece="U6" onclick="cycleColor(this)"></div>
                        <div class="sticker" data-piece="U7" onclick="cycleColor(this)"></div>
                        <div class="sticker" data-piece="U8" onclick="cycleColor(this)"></div>
                        <div class="sticker" data-piece="U9" onclick="cycleColor(this)"></div>
                    </div>
                </div>
                
                <div class="cube-faces-horizontal">
                    <div class="cube-face" id="face-L">
                        <h4>Left Face (Orange)</h4>
                        <div class="face-grid">
                            <!-- 3x3 grid of stickers -->
                        </div>
                    </div>
                    <div class="cube-face" id="face-F">
                        <h4>Front Face (Green)</h4>
                        <div class="face-grid">
                            <!-- 3x3 grid of stickers -->
                        </div>
                    </div>
                    <div class="cube-face" id="face-R">
                        <h4>Right Face (Red)</h4>
                        <div class="face-grid">
                            <!-- 3x3 grid of stickers -->
                        </div>
                    </div>
                    <div class="cube-face" id="face-B">
                        <h4>Back Face (Blue)</h4>
                        <div class="face-grid">
                            <!-- 3x3 grid of stickers -->
                        </div>
                    </div>
                </div>
                
                <div class="cube-face" id="face-D">
                    <h4>Down Face (White)</h4>
                    <div class="face-grid">
                        <!-- 3x3 grid of stickers -->
                    </div>
                </div>
            </div>

            <div class="solver-controls">
                <button class="icon-btn" onclick="scrambleSolver()">üîÄ Scramble</button>
                <button class="icon-btn" onclick="resetSolver()">üîÑ Reset</button>
                <button class="icon-btn" onclick="solveCube()">üöÄ Solve Cube</button>
                <button class="icon-btn secondary" onclick="fillRandom()">üé≤ Random</button>
            </div>
        </div>

        <div class="solution-section" id="solutionSection" style="display: none;">
            <h3>üìù Solution</h3>
            <div class="solution-stats">
                <div class="stat-card">
                    <div class="stat-label">Total Moves</div>
                    <div class="stat-value" id="totalMoves">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Solution Time</div>
                    <div class="stat-value" id="solutionTime">0.00s</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Method</div>
                    <div class="stat-value" id="solutionMethod">CFOP</div>
                </div>
            </div>

            <div class="solution-steps" id="solutionSteps">
                <!-- Solution steps will appear here -->
            </div>

            <div class="solution-controls">
                <button class="icon-btn" onclick="playSolution()">‚ñ∂Ô∏è Play Solution</button>
                <button class="icon-btn secondary" onclick="copySolution()">üìã Copy</button>
                <button class="icon-btn secondary" onclick="exportSolution()">üíæ Export</button>
            </div>
        </div>
    </div>

    <div class="tip-box">
        üí° <strong>Pro Tip:</strong> Use the solver to understand specific cases you're struggling with. Input the scrambled state and study the solution!
    </div>

    <h3>üîß Advanced Options</h3>
    <div class="method-card">
        <div class="form-group">
            <label for="solverMethod">Solving Method</label>
            <select id="solverMethod" onchange="updateSolverMethod()">
                <option value="cfop">CFOP (Recommended)</option>
                <option value="beginner">Beginner Method</option>
                <option value="roux">Roux Method</option>
                <option value="zz">ZZ Method</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="solverOptimization">Optimization Level</label>
            <select id="solverOptimization">
                <option value="fast">Fast Solution</option>
                <option value="optimal">Optimal Moves</option>
                <option value="fingertrick">Fingertrick Friendly</option>
            </select>
        </div>
    </div>
</div>

<style>
.cube-net {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    margin: 20px 0;
}

.cube-faces-horizontal {
    display: flex;
    gap: 20px;
    justify-content: center;
}

.cube-face {
    background: var(--border);
    padding: 15px;
    border-radius: 10px;
    text-align: center;
}

.face-grid {
    display: grid;
    grid-template-columns: repeat(3, 40px);
    grid-template-rows: repeat(3, 40px);
    gap: 2px;
    margin-top: 10px;
}

.sticker {
    width: 40px;
    height: 40px;
    border: 1px solid #333;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.sticker:hover {
    transform: scale(1.1);
}

.sticker.white { background: white; }
.sticker.yellow { background: yellow; }
.sticker.red { background: red; }
.sticker.orange { background: orange; }
.sticker.green { background: green; }
.sticker.blue { background: blue; }

.solution-steps {
    background: #1e293b;
    color: #10b981;
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    font-family: 'Courier New', monospace;
    max-height: 300px;
    overflow-y: auto;
}

.solution-step {
    padding: 10px;
    margin: 5px 0;
    border-left: 3px solid var(--accent);
    background: rgba(16, 185, 129, 0.1);
}

.step-number {
    font-weight: bold;
    color: var(--accent-alt);
    margin-right: 10px;
}

.step-move {
    font-weight: bold;
    color: #fbbf24;
}

.step-description {
    color: #e5e7eb;
    margin-left: 10px;
}
</style>

<script>
// Cube solver functionality
let currentCubeState = {};
let colorScheme = 'standard';
const colors = ['white', 'yellow', 'red', 'orange', 'green', 'blue'];

function setColorScheme(scheme) {
    colorScheme = scheme;
    updateColorDisplay();
}

function cycleColor(element) {
    const currentColor = element.className.replace('sticker ', '');
    const currentIndex = colors.indexOf(currentColor);
    const nextIndex = (currentIndex + 1) % colors.length;
    element.className = `sticker ${colors[nextIndex]}`;
    updateCubeState();
}

function updateCubeState() {
    // Implementation to read all sticker colors and build cube state
}

function scrambleSolver() {
    // Generate a random scramble and apply it visually
    const scramble = generateScramble();
    applyScrambleToSolver(scramble);
}

function resetSolver() {
    // Reset all stickers to solved state
    document.querySelectorAll('.sticker').forEach(sticker => {
        const face = sticker.closest('.cube-face').id.replace('face-', '');
        sticker.className = `sticker ${getDefaultColor(face, sticker.dataset.piece)}`;
    });
    updateCubeState();
}

function solveCube() {
    const startTime = performance.now();
    
    // Show loading state
    document.getElementById('solutionSection').style.display = 'block';
    document.getElementById('solutionSteps').innerHTML = '<div class="solution-step">Calculating solution...</div>';
    
    // Simulate solving process (in real implementation, this would use Kociemba algorithm)
    setTimeout(() => {
        const solution = generateMockSolution();
        displaySolution(solution);
        
        const endTime = performance.now();
        document.getElementById('solutionTime').textContent = `${(endTime - startTime).toFixed(2)}s`;
    }, 1000);
}

function generateMockSolution() {
    // Mock solution - in real implementation, this would use a proper solving algorithm
    return {
        moves: 25,
        method: 'CFOP',
        steps: [
            { move: "F R U R' U' F'", description: "Create yellow cross" },
            { move: "R U R' U R U2 R'", description: "OLL - Sune case" },
            { move: "U", description: "Adjust top layer" },
            { move: "R U R' F' R U R' U' R' F R2 U' R'", description: "PLL - T permutation" }
        ]
    };
}

function displaySolution(solution) {
    const stepsElement = document.getElementById('solutionSteps');
    const totalMovesElement = document.getElementById('totalMoves');
    const solutionMethodElement = document.getElementById('solutionMethod');
    
    totalMovesElement.textContent = solution.moves;
    solutionMethodElement.textContent = solution.method;
    
    stepsElement.innerHTML = solution.steps.map((step, index) => `
        <div class="solution-step">
            <span class="step-number">${index + 1}.</span>
            <span class="step-move">${step.move}</span>
            <span class="step-description">${step.description}</span>
        </div>
    `).join('');
}

function playSolution() {
    // Animate the solution step by step
    const steps = document.querySelectorAll('.solution-step');
    let currentStep = 0;
    
    const playNextStep = () => {
        if (currentStep < steps.length) {
            steps[currentStep].style.background = 'rgba(102, 126, 234, 0.2)';
            currentStep++;
            setTimeout(playNextStep, 1000);
        }
    };
    
    playNextStep();
}

function copySolution() {
    const solutionText = Array.from(document.querySelectorAll('.solution-step'))
        .map(step => step.textContent)
        .join('\n');
    
    navigator.clipboard.writeText(solutionText).then(() => {
        showNotification('Solution copied to clipboard!', 'success');
    });
}

function searchAlgorithms() {
    const query = document.getElementById('algorithmSearch').value.toLowerCase();
    // Implement algorithm search functionality
}
</script>