<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speedcubing Blog</title>
    <style>
        /* Your existing CSS styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-card: #ffffff;
            --text-primary: #333;
            --text-secondary: #666;
            --accent: #667eea;
            --accent-alt: #f093fb;
            --border: #e5e7eb;
            --shadow: rgba(0,0,0,0.1);
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --admin: #8b5cf6;
        }

        body.dark-mode {
            --bg-primary: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            --bg-card: #1e293b;
            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --accent: #818cf8;
            --accent-alt: #c084fc;
            --border: #334155;
            --shadow: rgba(0,0,0,0.3);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Navigation */
        nav {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        nav a {
            margin: 0 15px;
            text-decoration: none;
            color: var(--accent);
            font-weight: bold;
        }

        /* Blog Styles */
        .content-section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 10px 30px var(--shadow);
        }

        h2 {
            color: var(--accent);
            font-size: 2.5em;
            margin-bottom: 20px;
            border-bottom: 3px solid var(--accent-alt);
            padding-bottom: 10px;
        }

        .blog-categories {
            margin: 30px 0;
        }

        .notation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .notation-item {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px var(--shadow);
            text-align: center;
            border: 2px solid var(--border);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .notation-item:hover {
            transform: translateY(-5px);
        }

        .notation-item strong {
            color: var(--accent);
            font-size: 1.3em;
            display: block;
            margin-bottom: 5px;
        }

        .blog-posts {
            margin: 30px 0;
        }

        .method-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            transition: transform 0.3s ease;
            border: 2px solid var(--border);
            cursor: pointer;
        }

        .method-card:hover {
            transform: translateX(10px);
        }

        .blog-meta {
            display: flex;
            gap: 15px;
            margin: 10px 0;
            flex-wrap: wrap;
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .blog-tags {
            margin-top: 15px;
        }

        .difficulty {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin: 5px 5px 0 0;
            color: white;
        }

        .difficulty.beginner { background: var(--success); }
        .difficulty.intermediate { background: var(--warning); }
        .difficulty.advanced { background: var(--danger); }
        .difficulty.news { background: var(--accent); }

        .blog-newsletter {
            margin-top: 40px;
        }

        .form-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .form-group input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1em;
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .icon-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .icon-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .notification.success { background: var(--success); }
        .notification.error { background: var(--danger); }
        .notification.warning { background: var(--warning); }
        .notification.info { background: var(--accent); }
        .notification button {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .content-section {
                padding: 20px;
            }
            
            h2 {
                font-size: 2em;
            }
            
            .notation-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .blog-meta {
                flex-direction: column;
                gap: 5px;
            }
            
            .form-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <a href="index.html">üè† Home</a>
            <a href="solver.html">ü§ñ Solver</a>
            <a href="blog.html">üìù Blog</a>
            <a href="algorithms/index.html">üéØ Algorithms</a>
        </nav>

        <div class="content-section active">
            <h2>üìù Speedcubing Blog & News</h2>
            <p>Latest updates, tips, and insights from the world of speedcubing.</p>

            <div class="blog-categories">
                <div class="notation-grid">
                    <div class="notation-item" onclick="showBlogCategory('all')">
                        <strong>üì∞ All Posts</strong>
                        <p>Everything we've published</p>
                    </div>
                    <div class="notation-item" onclick="showBlogCategory('tips')">
                        <strong>üí° Tips</strong>
                        <p>Improvement strategies</p>
                    </div>
                    <div class="notation-item" onclick="showBlogCategory('reviews')">
                        <strong>üèÜ Reviews</strong>
                        <p>Cube & accessory reviews</p>
                    </div>
                    <div class="notation-item" onclick="showBlogCategory('news')">
                        <strong>üì∞ News</strong>
                        <p>Competition updates</p>
                    </div>
                    <div class="notation-item" onclick="showBlogCategory('tutorials')">
                        <strong>üéì Tutorials</strong>
                        <p>Advanced techniques</p>
                    </div>
                </div>
            </div>

            <div class="blog-posts">
                <!-- Blog posts will be loaded here dynamically -->
                <div class="method-card">
                    <p>üìù Loading blog posts...</p>
                </div>
            </div>

            <div class="blog-newsletter">
                <div class="method-card">
                    <h3>üìß Stay Updated</h3>
                    <p>Get the latest speedcubing tips, news, and cube reviews delivered to your inbox.</p>
                    <div class="form-group">
                        <input type="email" id="blogEmail" placeholder="Enter your email">
                        <button class="icon-btn" onclick="subscribeNewsletter()">Subscribe</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // Firebase configuration - REPLACE WITH YOUR ACTUAL CONFIG
        const firebaseConfig = {

  apiKey: "AIzaSyBdLy_17UqY5f3V4w-34d-eJKuq3bkMnOc",

  authDomain: "rubiks-cube-mastery.firebaseapp.com",

  projectId: "rubiks-cube-mastery",

  storageBucket: "rubiks-cube-mastery.firebasestorage.app",

  messagingSenderId: "388287805816",

  appId: "1:388287805816:web:ec3eea2d506a2e14af308d",

  measurementId: "G-1SFJCDG36F"

};


        // Initialize Firebase
        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            console.log('‚úÖ Firebase initialized successfully');
        } catch (error) {
            console.error('‚ùå Firebase initialization error:', error);
        }

        // Blog functionality
        async function loadBlogPosts() {
            const blogContainer = document.querySelector('.blog-posts');
            
            try {
                console.log('üîÑ Loading blog posts...');
                blogContainer.innerHTML = '<div class="method-card"><p>üìù Loading blog posts...</p></div>';

                if (typeof db === 'undefined') {
                    throw new Error('Firebase not configured. Please check your Firebase setup.');
                }

                const snapshot = await db.collection('blog_posts')
                    .orderBy('createdAt', 'desc')
                    .get();
                
                console.log('üìä Found', snapshot.size, 'documents');
                blogContainer.innerHTML = '';
                
                if (snapshot.empty) {
                    blogContainer.innerHTML = `
                        <div class="method-card">
                            <h3>üìù No Blog Posts Yet</h3>
                            <p>There are no blog posts in the database yet.</p>
                            <button class="icon-btn" onclick="createSamplePost()" style="margin-top: 10px;">
                                Create Sample Post
                            </button>
                        </div>
                    `;
                    return;
                }
                
                snapshot.forEach(doc => {
                    const post = doc.data();
                    console.log('üìÑ Processing post:', post.title);
                    const postElement = createBlogPostCard(doc.id, post);
                    blogContainer.appendChild(postElement);
                });
                
                console.log('‚úÖ Successfully loaded posts');
                showNotification(`Loaded ${snapshot.size} blog post${snapshot.size === 1 ? '' : 's'}`, 'success');
                
            } catch (error) {
                console.error('‚ùå Error loading blog posts:', error);
                blogContainer.innerHTML = `
                    <div class="method-card">
                        <h3>‚ùå Blog Loading Error</h3>
                        <p><strong>Error:</strong> ${error.message}</p>
                        <p><strong>Solution:</strong> Make sure Firebase is properly configured and you have internet connection.</p>
                        <div style="margin-top: 15px;">
                            <button class="icon-btn" onclick="loadBlogPosts()">üîÑ Try Again</button>
                            <button class="icon-btn secondary" onclick="showFirebaseHelp()">üìñ Setup Help</button>
                        </div>
                    </div>
                `;
            }
        }

        function createBlogPostCard(id, post) {
            const card = document.createElement('div');
            card.className = 'method-card';
            card.style.cursor = 'pointer';
            card.onclick = () => viewBlogPost(id, post);
            
            // Handle date formatting
            let postDate = 'Recent';
            if (post.createdAt && post.createdAt.toDate) {
                try {
                    postDate = post.createdAt.toDate().toLocaleDateString();
                } catch (e) {
                    console.log('Date error:', e);
                }
            }
            
            // Calculate read time
            const readTime = post.content ? Math.max(1, Math.ceil(post.content.length / 1000)) : 3;
            
            card.innerHTML = `
                <h3>${post.title || 'Untitled Post'}</h3>
                <div class="blog-meta">
                    <span>üìÖ ${postDate}</span>
                    <span>‚è±Ô∏è ${readTime} min read</span>
                    <span>üëÅÔ∏è ${post.views || 0} views</span>
                    <span>‚úçÔ∏è ${post.authorName || 'Admin'}</span>
                </div>
                <p>${post.description || 'No description available.'}</p>
                <div class="blog-tags">
                    ${post.category ? `<span class="difficulty ${post.category}">${getCategoryName(post.category)}</span>` : ''}
                    ${post.tags ? post.tags.map(tag => `<span class="difficulty news">${tag}</span>`).join('') : ''}
                </div>
            `;
            
            return card;
        }

        function getCategoryName(category) {
            const categories = {
                'tips': 'Tips & Tricks',
                'reviews': 'Cube Reviews', 
                'news': 'News & Events',
                'tutorials': 'Tutorials',
                'beginners': 'Beginner Guides'
            };
            return categories[category] || category;
        }

        function viewBlogPost(postId, post) {
            showNotification(`üìñ Opening: ${post.title}`, 'info');
            
            // Increment view count
            if (typeof db !== 'undefined') {
                db.collection('blog_posts').doc(postId).update({
                    views: firebase.firestore.FieldValue.increment(1)
                });
            }
            
            // For now, just show a message. You can create a full post view later
            // window.location.href = `/blog/post.html?id=${postId}`;
        }

        function showBlogCategory(category) {
            const posts = document.querySelectorAll('.blog-posts .method-card');
            let visibleCount = 0;
            
            posts.forEach(post => {
                const tags = post.textContent.toLowerCase();
                const shouldShow = category === 'all' || tags.includes(category.toLowerCase());
                post.style.display = shouldShow ? 'block' : 'none';
                if (shouldShow) visibleCount++;
            });
            
            showNotification(`Showing ${visibleCount} ${category} posts`, 'info');
        }

        function searchBlog() {
            const query = document.getElementById('blogSearch').value.toLowerCase();
            const posts = document.querySelectorAll('.blog-posts .method-card');
            let foundAny = false;
            
            posts.forEach(post => {
                const title = post.querySelector('h3').textContent.toLowerCase();
                const description = post.querySelector('p').textContent.toLowerCase();
                const matches = title.includes(query) || description.includes(query);
                post.style.display = matches ? 'block' : 'none';
                if (matches) foundAny = true;
            });
            
            if (!foundAny && query.length > 0) {
                showNotification('No posts found matching your search', 'warning');
            }
        }

        function subscribeNewsletter() {
            const email = document.getElementById('blogEmail').value;
            if (email && email.includes('@')) {
                showNotification('üéâ Thanks for subscribing to our newsletter!', 'success');
                document.getElementById('blogEmail').value = '';
                
                // Save to Firebase if available
                if (typeof db !== 'undefined') {
                    db.collection('newsletter_subscribers').add({
                        email: email,
                        subscribedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        active: true
                    });
                }
            } else {
                showNotification('Please enter a valid email address', 'error');
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()">√ó</button>
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 4000);
        }

        function showFirebaseHelp() {
            alert(`To set up Firebase:

1. Go to console.firebase.google.com
2. Create a project or select existing one
3. Click "Add app" ‚Üí Web
4. Copy the config object
5. Replace the firebaseConfig in your blog.html

Your blog posts should then load automatically!`);
        }

        // Create a sample post for testing
        async function createSamplePost() {
            if (typeof db === 'undefined') {
                alert('Firebase not configured. Please set up Firebase first.');
                return;
            }
            
            try {
                await db.collection('blog_posts').add({
                    title: "üöÄ Welcome to Our Blog!",
                    description: "This is a sample blog post to get you started. Edit or delete this post and create your own!",
                    content: "This is the full content of your first blog post. You can write about speedcubing tips, cube reviews, or competition updates here.",
                    authorName: "Admin",
                    category: "news",
                    views: 0,
                    published: true,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                showNotification('‚úÖ Sample post created!', 'success');
                loadBlogPosts(); // Reload to show the new post
            } catch (error) {
                showNotification('‚ùå Error creating post: ' + error.message, 'error');
            }
        }

        // Load blog posts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Blog page loaded, initializing...');
            loadBlogPosts();
        });
    </script>
</body>
</html>
